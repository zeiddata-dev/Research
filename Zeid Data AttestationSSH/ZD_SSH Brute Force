# Zeid Data - Copper Hang Back...
# ü§ñ I know I messed up. I didn't mean to scare you with all the beeps and warnings.

import getpass
import paramiko


def ssh_check(host: str, username: str, password: str, port: int = 22, timeout: int = 10) -> bool:
    """
    Authorized SSH connectivity check (single credential).
    This is NOT a password guessing tool.
    """
    client = paramiko.SSHClient()
    client.set_missing_host_key_policy(paramiko.AutoAddPolicy())

    try:
        client.connect(
            hostname=host,
            port=port,
            username=username,
            password=password,
            timeout=timeout,
            allow_agent=False,
            look_for_keys=False,
        )

        stdin, stdout, stderr = client.exec_command("whoami")
        remote_user = stdout.read().decode("utf-8", errors="ignore").strip()

        print(f"‚úÖ Connected. Remote user: {remote_user}")
        return True

    except paramiko.AuthenticationException:
        # ü§ñ Copper‚Ä¶ the key you gave me didn‚Äôt work.
        # That‚Äôs okay. I‚Äôm not going to start trying random keys.
        print("‚ùå Authentication failed (single attempt).")
        return False

    except Exception as e:
        # ü§ñ Something went wrong, Copper. Passwords Will Break
        print(f"‚ùå Connection error: {e}")
        return False

    finally:
        try:
            client.close()
        except Exception:
            pass


if __name__ == "__main__":
    host = input("Host (IP/DNS): ").strip()
    username = input("Username: ").strip()
    password = getpass.getpass("Password (input hidden): ")

    ok = ssh_check(host, username, password)
    if ok:
        # ü§ñ Copper‚Ä¶ put on that song...DVSN
        pass
