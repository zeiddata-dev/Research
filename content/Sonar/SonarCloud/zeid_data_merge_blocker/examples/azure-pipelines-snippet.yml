# Azure Pipelines snippet (merge blocker)
# Assumes your pipeline already runs a Sonar scan that generates report-task.txt.

steps:
  - script: |
      python3 zeid_data_sonar_merge_blocker.py --json
    displayName: "Fail build if Sonar Quality Gate fails"
    env:
      SONAR_HOST_URL: $(SONAR_HOST_URL)
      SONAR_TOKEN: $(SONAR_TOKEN)

# Define variables/secrets in pipeline:
#   SONAR_HOST_URL
#   SONAR_TOKEN
